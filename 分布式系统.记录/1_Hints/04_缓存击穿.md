## 1 缓存穿透

是指攻击者不断发起不存在的数据的请求，导致数据库压力过大。

解决方案：

- 接口层增加校验：验证用户的合法性，用户请求的合法性。
- 对不存在的数据也缓存一个"key-null"的键值对，缓存有效时间可以设置短点（例如30秒）。防止攻击用户反复用同一个key值攻击。



## 2 缓存击穿

缓存击穿是指缓存中没有但数据库中有的数据（一般是缓存时间到期），这时由于并发用户特别多，同时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大，造成过大压力。

解决方案：

- 设置热点数据永不过期。
- 加互斥锁，避免对同一数据的并发访问。



## 3 缓存雪崩

缓存雪崩是指缓存中数据大批量到过期时间，而查询数据量巨大，引起数据库压力过大甚至down机。和缓存击穿不同的是，缓存击穿指并发查同一条数据，缓存雪崩是不同数据都过期了，很多数据都查不到从而查数据库。

解决方案：

- 缓存数据的过期时间设置随机，防止同一时间大量数据过期现象发生。

- 如果缓存数据库是分布式部署，将热点数据均匀分布在不同搞得缓存数据库中。

- 设置热点数据永远不过期