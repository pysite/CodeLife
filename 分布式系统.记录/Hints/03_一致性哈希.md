## 1 为什么普通的hash算法不行

普通的hash，例如取余算法，当主机数量发生改变时便会发生不一致的问题，原本存储的数据的key值发生改变导致存储的位置也改变。而如果采用笨的办法，在改变机器数量时清空所有的缓存，这就会可能导致引发缓存击穿、缓存雪崩等问题，严重的还可能导致机器宕机。 



## 2 一致性哈希

很简单，假设哈希值可能的范围为0~(2^32-1)，则形成了一个环。

每台服务器可以通过某种方法算出hash key，每个数据也能以一种算法算出hash key，这样各个服务器和各条数据全分散在这个环上。我们于是规定：**每个数据存储的节点就是顺时针寻找到的第一个服务器**。这样当服务器被remove或者刚加入时，都只会影响环上一小段的数据需要迁移。